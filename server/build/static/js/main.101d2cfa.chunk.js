(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),l=a.n(o),c=a(14),i=a(15),u=a.n(i),s=a(23),m=a(9),d=a(162),p=a(105),f=a(151),g=a(144),b=a(165),v=a(148),h=a(150),E=a(149),y=a(152),k=a(153),j=Object(g.a)((function(e){return{root:{width:"100%",marginBottom:"1.25rem"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},details:{flexDirection:"column"},marginRight:{marginRight:"1rem"},marginBottom:{marginBottom:"1.5rem"}}})),O=function(e){var t=j(),a=e.post,n=e.likePost,o=e.deletePost;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:t.root},r.a.createElement(v.a,{expandIcon:r.a.createElement(E.a,null)},r.a.createElement(p.a,{variant:"subtitle2"},"".concat(a.title," by ").concat(a.author))),r.a.createElement(h.a,{className:t.details},r.a.createElement(p.a,{variant:"subtitle2",gutterBottom:!0},"Description"),r.a.createElement(p.a,{variant:"caption",className:t.marginBottom},a.description),r.a.createElement(p.a,{variant:"subtitle2",className:t.marginBottom},r.a.createElement("span",{className:t.marginRight},a.likes),r.a.createElement(f.a,{className:t.marginRight,size:"small",color:"primary",variant:"contained",startIcon:r.a.createElement(y.a,null),onClick:function(){return n(a)}},"Like"),r.a.createElement(f.a,{size:"small",variant:"contained",color:"secondary",startIcon:r.a.createElement(k.a,null),onClick:function(){return o(a)}},"Delete recommendation")),r.a.createElement(p.a,{variant:"overline"},"Book recommended by ",a.user.name))))},w=a(166),x=a(155),S=a(163),C=a(103),N=a(154),B=a(66),I=a.n(B),R=Object(g.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://images.unsplash.com/photo-1533756102515-155e3863ee1c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1868&q=80)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),T=function(e){var t=e.login,a=R(),o=Object(n.useState)(""),l=Object(m.a)(o,2),c=l[0],i=l[1],u=Object(n.useState)(""),s=Object(m.a)(u,2),d=s[0],g=s[1];return r.a.createElement(N.a,{container:!0,className:a.root},r.a.createElement(x.a,null),r.a.createElement(N.a,{item:!0,xs:!1,sm:4,md:7,className:a.image}),r.a.createElement(N.a,{item:!0,xs:12,sm:8,md:5,component:C.a,elevation:6,square:!0},r.a.createElement("div",{className:a.paper},r.a.createElement(w.a,{className:a.avatar},r.a.createElement(I.a,null)),r.a.createElement(p.a,{component:"h1",variant:"h5"},"Book Vault"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),t({username:c,password:d}),i(""),g("")}},r.a.createElement(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Username",name:"username",id:"usernaame",autoFocus:!0,autoComplete:"off",value:c,onChange:function(e){return i(e.target.value)}}),r.a.createElement(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:d,onChange:function(e){return g(e.target.value)}}),r.a.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign In")))))},z=a(67),D=a.n(z),P=function(e){var t=e.createPost,a=Object(n.useState)(""),o=Object(m.a)(a,2),l=o[0],c=o[1],i=Object(n.useState)(""),u=Object(m.a)(i,2),s=u[0],d=u[1],g=Object(n.useState)(""),b=Object(m.a)(g,2),v=b[0],h=b[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{variant:"h4",gutterBottom:!0},"Recommend a book"),r.a.createElement(N.a,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:l,author:s,url:v}),c(""),d(""),h("")}},r.a.createElement(N.a,null,r.a.createElement(S.a,{required:!0,name:"title",label:"Title",value:l,onChange:function(e){return c(e.target.value)},autoComplete:"off"})),r.a.createElement(S.a,{required:!0,name:"author",label:"Author",value:s,onChange:function(e){return d(e.target.value)},autoComplete:"off"}),r.a.createElement(N.a,null,r.a.createElement(S.a,{name:"url",label:"Url",value:v,onChange:function(e){return h(e.target.value)},autoComplete:"off"})))),r.a.createElement(N.a,{style:{margin:"1rem 0"}},r.a.createElement(f.a,{type:"submit",variant:"contained",color:"primary",size:"small",startIcon:r.a.createElement(D.a,null)},"Save")))},J=a(164),W=Object(g.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function q(e){var t=e.message,a=e.type,n=W();return t?"error"===a?r.a.createElement("div",{className:n.root},r.a.createElement(J.a,{severity:"error"},t)):"success"===a?r.a.createElement("div",{className:n.root},r.a.createElement(J.a,{severity:"success"},t)):void 0:null}var L=a(68),F=a.n(L),V=r.a.forwardRef((function(e,t){var a=Object(n.useState)(!1),o=Object(m.a)(a,2),l=o[0],c=o[1],i={display:l?"":"none"},u={display:l?"none":""},s=function(){return c(!l)};return Object(n.useImperativeHandle)(t,(function(){return{toggleVisibility:s}})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:u},r.a.createElement(f.a,{variant:"outlined",size:"small",onClick:s},e.buttonLabel)),r.a.createElement("div",{style:i},e.children,r.a.createElement(f.a,{variant:"contained",color:"secondary",size:"small",startIcon:r.a.createElement(F.a,null),onClick:s},"Cancel")))}));V.displayName="Toggleable";var U=V,M=a(156),A=Object(g.a)((function(e){return{toolbar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbarTitle:{flex:1}}})),H=function(e){var t=A(),a=e.user,n=e.handleLogout;return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{className:t.toolbar},r.a.createElement(p.a,{component:"h2",variant:"h5",color:"inherit",align:"center",noWrap:!0,className:t.toolbarTitle},a.name,"'s Book Vault"),r.a.createElement(f.a,{variant:"outlined",size:"small",onClick:n},"Logout")))},_=a(158),G=a(157),Q=a(159),K=a(161),X=a(160),Y=Object(g.a)((function(e){return{card:{display:"flex",margin:"1.5rem 0",backgroundColor:"rgba(225, 232, 240, 0.25)"},cardDetails:{flex:1},cardMedia:{margin:".75rem",width:"8rem"}}}));function Z(e){var t=Y(),a=e.post;return r.a.createElement(N.a,null,r.a.createElement(G.a,{component:"a",href:a.url,target:"_blank"},r.a.createElement(_.a,{className:t.card},r.a.createElement(Q.a,null,r.a.createElement(p.a,{component:"h2",variant:"h5",gutterBottom:!0},a.title),r.a.createElement(p.a,{variant:"subtitle1",color:"textSecondary"},"by ",a.author),r.a.createElement(p.a,{variant:"subtitle1",paragraph:!0},a.description),r.a.createElement(X.a,{href:a.url,target:"_blank",variant:"subtitle1"},"Continue reading...")),r.a.createElement(K.a,{component:"img",className:t.cardMedia,src:a.bookImageUrl}))))}var $=a(20),ee=a.n($),te={login:function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ae=a(69),ne=null,re=null,oe=function(e){ne=null===e?null:"Bearer ".concat(e),re={headers:{Authorization:ne}}},le=function(){return ee.a.get("".concat("/api","/blogposts")).then((function(e){return e.data}))},ce=function(e){return ee.a.post("".concat("/api","/blog"),e,re).then((function(e){return e.data}))},ie=function(e){var t=e.likes+1,a=Object(ae.a)({},e,{likes:t});return ee.a.put("".concat("/api","/blogposts/").concat(e.id),a).then((function(e){return e.data}))},ue=function(e){return ee.a.delete("".concat("/api","/blogposts/").concat(e.id),re).then((function(e){return e.data}))},se={title:"JavaScript: The Good Parts",author:"John Duckett",description:"This authoritative book scrapes away these bad features to reveal a subset of JavaScript that's more reliable, readable, and maintainable than the language as a whole--a subset you can use to create truly extensible and efficient code.",url:"https://www.goodreads.com/book/show/2998152-javascript",bookImageUrl:"https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1328834793l/2998152.jpg"},me=function(){var e=r.a.createRef(),t=Object(n.useState)(null),a=Object(m.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)([]),g=Object(m.a)(i,2),b=g[0],v=g[1],h=Object(n.useState)(null),E=Object(m.a)(h,2),y=E[0],k=E[1],j=Object(n.useState)(null),w=Object(m.a)(j,2),x=w[0],S=w[1];Object(n.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("user"));e&&(oe(e.token),l(e))}),[]),Object(n.useEffect)((function(){null!==o&&(oe(o.token),le().then((function(e){return v(e)})))}),[o]);var C=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.login(t);case 3:a=e.sent,window.localStorage.setItem("user",JSON.stringify(a)),l(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),k(e.t0.response.data.error),setTimeout((function(){k(null)}),4e3);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var t=Object(s.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.current.toggleVisibility(),t.next=3,ce(a);case 3:n=t.sent,v([].concat(Object(c.a)(b),[n])),S("".concat(n.title," was successfully added")),setTimeout((function(){S(null)}),4e3);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=function(){var e=Object(s.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(t);case 2:a=e.sent,n=b.map((function(e){return e.id===a.id?a:e})),v(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("".concat(t.title," will be deleted!"))){e.next=7;break}return e.next=5,ue(t);case 5:a=b.filter((function(e){return e.id!==t.id})),v(a);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),k(e.t0.response.data.error),setTimeout((function(){k(null)}),4e3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return null===o?r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement(q,{message:y,type:"error"})),r.a.createElement(T,{login:C})):r.a.createElement(d.a,null,r.a.createElement(H,{user:o,handleLogout:function(e){e.preventDefault(),localStorage.removeItem("user"),oe(null),v([]),l(null)}}),r.a.createElement("div",null,r.a.createElement(q,{message:x,type:"success"})),r.a.createElement("div",null,r.a.createElement(q,{message:y,type:"error"})),r.a.createElement(Z,{post:se}),r.a.createElement(p.a,{variant:"h4"},"Reads"),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"0.75rem"}},r.a.createElement(f.a,{variant:"outlined",size:"small",onClick:function(){var e=Object(c.a)(b.sort((function(e,t){return t.likes-e.likes})));v(e)}},"Sort recommendations")),b.map((function(e){return r.a.createElement(O,{post:e,likePost:B,deletePost:I,key:e.id})})),r.a.createElement("div",null,r.a.createElement(U,{buttonLabel:"Recommend a book",ref:e},r.a.createElement(P,{createPost:N}))))};l.a.render(r.a.createElement(me,null),document.getElementById("root"))},75:function(e,t,a){e.exports=a(102)}},[[75,1,2]]]);
//# sourceMappingURL=main.101d2cfa.chunk.js.map